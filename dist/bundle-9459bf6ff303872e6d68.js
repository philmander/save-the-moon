!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(t,e,i){"use strict";var s=Object.prototype.hasOwnProperty,n="~";function h(){}function o(t,e,i,s,h){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new function(t,e,i){this.fn=t,this.context=e,this.once=i||!1}(i,s||t,h),r=n?n+e:e;return t._events[r]?t._events[r].fn?t._events[r]=[t._events[r],o]:t._events[r].push(o):(t._events[r]=o,t._eventsCount++),t}function r(t,e){0==--t._eventsCount?t._events=new h:delete t._events[e]}function a(){this._events=new h,this._eventsCount=0}Object.create&&(h.prototype=Object.create(null),(new h).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)s.call(t,e)&&i.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var s=0,h=i.length,o=new Array(h);s<h;s++)o[s]=i[s].fn;return o},a.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},a.prototype.emit=function(t,e,i,s,h,o){var r=n?n+t:t;if(!this._events[r])return!1;var a,c,l=this._events[r],u=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),u){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,i),!0;case 4:return l.fn.call(l.context,e,i,s),!0;case 5:return l.fn.call(l.context,e,i,s,h),!0;case 6:return l.fn.call(l.context,e,i,s,h,o),!0}for(c=1,a=new Array(u-1);c<u;c++)a[c-1]=arguments[c];l.fn.apply(l.context,a)}else{var d,p=l.length;for(c=0;c<p;c++)switch(l[c].once&&this.removeListener(t,l[c].fn,void 0,!0),u){case 1:l[c].fn.call(l[c].context);break;case 2:l[c].fn.call(l[c].context,e);break;case 3:l[c].fn.call(l[c].context,e,i);break;case 4:l[c].fn.call(l[c].context,e,i,s);break;default:if(!a)for(d=1,a=new Array(u-1);d<u;d++)a[d-1]=arguments[d];l[c].fn.apply(l[c].context,a)}}return!0},a.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,i,s){var h=n?n+t:t;if(!this._events[h])return this;if(!e)return r(this,h),this;var o=this._events[h];if(o.fn)o.fn!==e||s&&!o.once||i&&o.context!==i||r(this,h);else{for(var a=0,c=[],l=o.length;a<l;a++)(o[a].fn!==e||s&&!o[a].once||i&&o[a].context!==i)&&c.push(o[a]);c.length?this._events[h]=1===c.length?c[0]:c:r(this,h)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&r(this,e)):(this._events=new h,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a},function(t,e,i){t.exports=i.p+"invader.mp3"},function(t,e,i){t.exports=i.p+"invader.png"},function(t,e,i){t.exports=i.p+"explosion-large.mp3"},function(t,e,i){t.exports=i.p+"explosion-small.mp3"},function(t,e,i){t.exports=i.p+"shot.mp3"},function(t,e,i){t.exports=i.p+"gun.png"},function(t,e,i){t.exports=i.p+"game-over.mp3"},function(t,e,i){t.exports=i.p+"pause.mp3"},function(t,e,i){"use strict";i.r(e);var s=i(0);class n{constructor(t,e){e=Object.assign({},n.defaults,e),this.element=t,this.threshold=e.threshold,this.velocityThreshold=e.velocityThreshold,this.disregardVelocityThreshold=e.disregardVelocityThreshold,this.pressThreshold=e.pressThreshold,this.diagonalSwipes=e.diagonalSwipes,this.diagonalLimit=e.diagonalLimit,this.mouseSupport=e.mouseSupport,this.longPressTime=e.longPressTime,this.doubleTapTime=e.doubleTapTime,this.touchStartX=null,this.touchStartY=null,this.touchEndX=null,this.touchEndY=null,this.velocityX=null,this.velocityY=null,this.longPressTimer=null,this.doubleTapWaiting=!1,this.handlers={panstart:[],panmove:[],panend:[],swipeleft:[],swiperight:[],swipeup:[],swipedown:[],tap:[],doubletap:[],longpress:[]},this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onTouchEnd=this.onTouchEnd.bind(this),this.element.addEventListener("touchstart",this._onTouchStart,h),this.element.addEventListener("touchmove",this._onTouchMove,h),this.element.addEventListener("touchend",this._onTouchEnd,h),!this.mouseSupport||"ontouchstart"in window||(this.element.addEventListener("mousedown",this._onTouchStart,h),document.addEventListener("mousemove",this._onTouchMove,h),document.addEventListener("mouseup",this._onTouchEnd,h))}destroy(){this.element.removeEventListener("touchstart",this._onTouchStart),this.element.removeEventListener("touchmove",this._onTouchMove),this.element.removeEventListener("touchend",this._onTouchEnd),this.element.removeEventListener("mousedown",this._onTouchStart),document.removeEventListener("mousemove",this._onTouchMove),document.removeEventListener("mouseup",this._onTouchEnd),clearTimeout(this.longPressTimer)}on(t,e){if(this.handlers[t])return this.handlers[t].push(e),{type:t,fn:e,cancel:()=>this.off(t,e)}}off(t,e){if(this.handlers[t]){const i=this.handlers[t].indexOf(e);-1!==i&&this.handlers[t].splice(i,1)}}fire(t,e){for(let i=0;i<this.handlers[t].length;i++)this.handlers[t][i](e)}onTouchStart(t){this.thresholdX=this.threshold("x",this),this.thresholdY=this.threshold("y",this),this.disregardVelocityThresholdX=this.disregardVelocityThreshold("x",this),this.disregardVelocityThresholdY=this.disregardVelocityThreshold("y",this),this.touchStartX="mousedown"===t.type?t.screenX:t.changedTouches[0].screenX,this.touchStartY="mousedown"===t.type?t.screenY:t.changedTouches[0].screenY,this.touchMoveX=null,this.touchMoveY=null,this.touchEndX=null,this.touchEndY=null,this.longPressTimer=setTimeout(()=>this.fire("longpress",t),this.longPressTime),this.fire("panstart",t)}onTouchMove(t){if("mousemove"===t.type&&(!this.touchStartX||null!==this.touchEndX))return;const e=("mousemove"===t.type?t.screenX:t.changedTouches[0].screenX)-this.touchStartX;this.velocityX=e-this.touchMoveX,this.touchMoveX=e;const i=("mousemove"===t.type?t.screenY:t.changedTouches[0].screenY)-this.touchStartY;this.velocityY=i-this.touchMoveY,this.touchMoveY=i;const s=Math.abs(this.touchMoveX),n=Math.abs(this.touchMoveY);this.swipingHorizontal=s>this.thresholdX,this.swipingVertical=n>this.thresholdY,this.swipingDirection=s>n?this.swipingHorizontal?"horizontal":"pre-horizontal":this.swipingVertical?"vertical":"pre-vertical",Math.max(s,n)>this.pressThreshold&&clearTimeout(this.longPressTimer),this.fire("panmove",t)}onTouchEnd(t){if("mouseup"===t.type&&(!this.touchStartX||null!==this.touchEndX))return;this.touchEndX="mouseup"===t.type?t.screenX:t.changedTouches[0].screenX,this.touchEndY="mouseup"===t.type?t.screenY:t.changedTouches[0].screenY,this.fire("panend",t),clearTimeout(this.longPressTimer);const e=this.touchEndX-this.touchStartX,i=this.touchEndY-this.touchStartY;Math.abs(e)>this.thresholdX||Math.abs(i)>this.thresholdY?(this.swipedHorizontal=this.diagonalSwipes?Math.abs(e/i)<=this.diagonalLimit:Math.abs(e)>=Math.abs(i),this.swipedVertical=this.diagonalSwipes?Math.abs(i/e)<=this.diagonalLimit:Math.abs(i)>Math.abs(e),this.swipedHorizontal&&(e<0?(this.velocityX<-this.velocityThreshold||e<-this.disregardVelocityThresholdX)&&this.fire("swipeleft",t):(this.velocityX>this.velocityThreshold||e>this.disregardVelocityThresholdX)&&this.fire("swiperight",t)),this.swipedVertical&&(i<0?(this.velocityY<-this.velocityThreshold||i<-this.disregardVelocityThresholdY)&&this.fire("swipeup",t):(this.velocityY>this.velocityThreshold||i>this.disregardVelocityThresholdY)&&this.fire("swipedown",t))):Math.abs(e)<this.pressThreshold&&Math.abs(i)<this.pressThreshold&&(this.doubleTapWaiting?(this.doubleTapWaiting=!1,clearTimeout(this.doubleTapTimer),this.fire("doubletap",t)):(this.doubleTapWaiting=!0,this.doubleTapTimer=setTimeout(()=>this.doubleTapWaiting=!1,this.doubleTapTime),this.fire("tap",t)))}}n.defaults={threshold:(t,e)=>Math.max(25,Math.floor(.15*("x"===t?window.innerWidth||document.body.clientWidth:window.innerHeight||document.body.clientHeight))),velocityThreshold:10,disregardVelocityThreshold:(t,e)=>Math.floor(.5*("x"===t?e.element.clientWidth:e.element.clientHeight)),pressThreshold:8,diagonalSwipes:!1,diagonalLimit:Math.tan(.375*Math.PI),longPressTime:500,doubleTapTime:300,mouseSupport:!0};let h=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){h={passive:!0}}}))}catch(t){}var o;!function(t){t[t.NONE=0]="NONE",t[t.MOVE_LEFT=1]="MOVE_LEFT",t[t.MOVE_RIGHT=2]="MOVE_RIGHT",t[t.FIRE=3]="FIRE"}(o||(o={}));class r{constructor(){this._dx=0,this._dy=0,this._scoreModifier=0}play(t){new Audio(t).play()}get spriteImage(){return this._spriteImage}get width(){return this._width}get height(){return this._height}get x(){return this._x}get y(){return this._y}get strength(){return this._strength}get scoreModifier(){return this._scoreModifier}move(t=this._dx,e=this._dy){this._x+=t,this._y+=e}hit(){this._strength--}isAlive(){return this._strength>0}}var a=function(t,e){return new class extends r{constructor(t,e){super(),this._x=t,this._y=e,this._width=8,this._height=6,this._strength=2,this._scoreModifier=-10}draw(t){t.fillStyle="rgb(141, 178, 201)",t.fillRect(this.x,this.y,this.width,this.height)}}(t,e)};var c=function(t,e){return new class extends r{constructor(t,e){super(),this.color=l[Math.floor(3*Math.random())],this._x=t,this._y=e,this._dx=0,this._dy=5,this._width=10,this._height=10,this._strength=1}isAlive(){return super.isAlive()&&this.y<500}move(){this.y>480&&(this._dy=0,setTimeout(()=>{this.hit()},1e3)),super.move()}draw(t){t.beginPath(),t.arc(this.x+this.width/2,this.y+this.height/2,this.width/2,0,2*Math.PI,!1),t.fillStyle=this.color,t.fill()}}(t,e)};const l=["yellow","lime","purple"];function u(t,e){return t.x+t.width>e.x&&t.x<e.x+e.width&&t.y+t.height>e.y&&t.y<e.y+e.height}function d(t,e,i){t.isAlive()?(t.move(),"function"==typeof i&&i()):e.delete(t)}function p(t,e){return Math.floor(Math.random()*(e-t+1))+t}var f=i(1),m=i.n(f),g=i(2),v=i.n(g),y=function(t,e,i,s){return new(i||(i=Promise))(function(n,h){function o(t){try{a(s.next(t))}catch(t){h(t)}}function r(t){try{a(s.throw(t))}catch(t){h(t)}}function a(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(o,r)}a((s=s.apply(t,e||[])).next())})},_=function(){return new class extends r{constructor(){super(),this._ammo=1,this._width=45,this._height=19,this._dx=p(4,8),this._dy=p(1,2),Math.random()>=.5?this._x=0:(this._x=500-this.width,this._dx*=-1),this._y=0,this._strength=1,this._scoreModifier=500,this._aggressiveness=p(90,95),this.play(m.a)}get ammo(){return this._ammo}isAlive(){return super.isAlive()&&this.y>=0}move(){this.x+this.width>500||this.x<0?this._dx*=-1:(this.y+this.height>320||this.y<0)&&(this._dy*=-1),super.move()}fire(){return this.isFiring()?c(this.x+this.width/2,this.y):null}isFiring(){return Math.random()>=this._aggressiveness/100}draw(t){w&&t.drawImage(w,this.x,this.y)}}};let w=null,x=new Image;x.onload=function(){return y(this,void 0,void 0,function*(){w=yield createImageBitmap(x,0,0,45,19)})},x.src=v.a;var T,S,E=i(3),b=i.n(E),M=i(4),I=i.n(M),L=function(t,e,i){return new class extends r{constructor(t,e,i){super(),this.frame=0,this.color=S.ORANGE,this.points=[],this.variance=1,this.drawCount=0,this._x=t,this._y=e,this._dx=0,this._dy=10,this._width=10,this._height=10,this.variance=0,this._strength=20,this.size=i,this.size===T.LARGE?this.play(b.a):this.play(I.a)}move(){this.drawCount%4==0&&(this.color=this.color===S.ORANGE?S.YELLOW:S.ORANGE),this.drawCount%2==0&&(this.variance=20+Math.floor(Math.random()*(this.size-1)));const t=this.variance,e=Math.round(Math.sin(N(72))*t),i=Math.round(Math.cos(N(72))*t),s=Math.round(Math.sin(N(36))*t),n=Math.round(Math.cos(N(36))*t);this.points[0]=[this.x,this.y-t],this.points[1]=[this.x+s,this.y+n],this.points[2]=[this.x-e,this.y-i],this.points[3]=[this.x+e,this.y-i],this.points[4]=[this.x-s,this.y+n],this.hit()}draw(t){t.beginPath(),t.moveTo(this.points[0][0],this.points[0][1]);for(let e=1;e<this.points.length;e++)t.lineTo(this.points[e][0],this.points[e][1]);t.closePath(),t.fillStyle=this.color,t.fill(),this.drawCount++}}(t,e,i)};!function(t){t[t.SMALL=35]="SMALL",t[t.LARGE=80]="LARGE"}(T||(T={})),function(t){t.ORANGE="rgb(255, 220, 0)",t.YELLOW="rgb(255, 50, 0)"}(S||(S={}));function N(t){return t*(Math.PI/180)}var A=i(5),O=i.n(A),R=function(t,e){return new class extends r{constructor(t,e){super(),this.points=[],this._x=t,this._y=e,this._width=5,this._height=14,this._dx=0,this._dy=-15,this._strength=1,this.points[0]=[t+0,e+6],this.points[1]=[t+0,e+13],this.points[2]=[t+4,e+13],this.points[3]=[t+4,e+6],this.points[4]=[t+2,e+0],this.play(O.a)}isAlive(){return super.isAlive()&&this.y>0}move(){super.move();for(let t=0;t<this.points.length;t++)this.points[t][0]+=this._dx,this.points[t][1]+=this._dy}draw(t){t.beginPath(),t.moveTo(this.points[0][0],this.points[0][1]);for(let e=1;e<this.points.length;e++)t.lineTo(this.points[e][0],this.points[e][1]);t.closePath(),t.fillStyle="rgb(200, 200, 200)",t.fill()}}(t,e)};var Y=i(6),X=i.n(Y),P=function(t,e,i,s){return new(i||(i=Promise))(function(n,h){function o(t){try{a(s.next(t))}catch(t){h(t)}}function r(t){try{a(s.throw(t))}catch(t){h(t)}}function a(t){t.done?n(t.value):new i(function(e){e(t.value)}).then(o,r)}a((s=s.apply(t,e||[])).next())})},G=function(t,e){return new class extends r{constructor(t,e){super(),this.control=o.NONE,this._ammo=50,this._x=t,this._y=e,this._width=50,this._height=38,this._dx=15,this._dy=0,this._strength=3,this._scoreModifier=-500}get ammo(){return this._ammo}isMoving(){return this.control===o.MOVE_LEFT||this.control===o.MOVE_RIGHT}isFiring(){return this.control===o.FIRE}move(){this.isMoving()&&(this.x>0&&this.control===o.MOVE_LEFT?this._x-=this._dx*this.controlModifier:this.x+this.width<=500&&this.control===o.MOVE_RIGHT&&(this._x+=this._dx*this.controlModifier))}fire(){return this._ammo-- >0?R(this.x+this.width/2,this.y):null}draw(t){V&&t.drawImage(V,this.x,this.y)}}(t,e)};let V=null,F=new Image;F.onload=function(){return P(this,void 0,void 0,function*(){V=yield createImageBitmap(F,0,0,50,38)})},F.src=X.a;var C,H=i(7),j=i.n(H),k=i(8),z=i.n(k);!function(t){t[t.READY=0]="READY",t[t.RUNNING=1]="RUNNING",t[t.FINISHED=2]="FINISHED"}(C||(C={}));function B(t){t.classList.remove("show")}function W(t){t.classList.add("show")}const D=new class{constructor(){this.el={ready:document.getElementById("ready"),running:document.getElementById("running"),finished:document.getElementById("finished")},this.text={lives:document.getElementById("lives"),score:document.getElementById("score"),ammo:document.getElementById("ammo"),finalScore:document.getElementById("final-score"),highScore:document.getElementById("high-score")}}updateScore(t){this.text.score.textContent=t+""}updateLives(t){this.text.lives.textContent=t+""}updateAmmo(t){this.text.ammo.textContent=t+""}paused(t){}ready(){this.hideAll(),W(this.el.ready)}running(){this.hideAll(),W(this.el.running)}finished(t,e){this.text.finalScore.textContent=e+"",this.text.highScore.textContent=t+"",this.hideAll(),W(this.el.finished)}hideAll(){B(this.el.ready),B(this.el.running),B(this.el.finished)}};const U=document.querySelector(".canvas-wrap"),q=document.getElementById("canvas"),J=()=>{const t=Math.min(800,Math.min(window.innerWidth,window.innerHeight));U.style.top=(window.innerHeight-t)/2+"px",U.style.width=t+"px",U.style.height=t+"px",q.style.width=t+"px",q.style.height=t+"px"};window.addEventListener("resize",J),J();const K=D,Q=function(t){return new class{constructor(t){this.invaderInterval=120,this.invaderIncrement=0,this._score=0,this.paused=!1,this.events=new s.EventEmitter,t.width=500,t.height=500,this.canvas=t,this.handleInput()}get stage(){return this._stage}get score(){return this._score}init(){this.ctx=this.canvas.getContext("2d"),this.buffer=document.createElement("canvas"),this.buffer.width=this.canvas.width,this.buffer.height=this.canvas.height,this.bufferCtx=this.buffer.getContext("2d"),this.invaderSet=new Set,this.bombSet=new Set,this.missileSet=new Set,this.shelterSet=new Set,this.explosionSet=new Set,this.gun=G(100,430),this.events.emit("ammo-changed",{ammo:this.gun.ammo});for(let t=370;t<394;t+=8){for(let e=65;e<145;e+=10)this.shelterSet.add(a(e,t));for(let e=210;e<290;e+=10)this.shelterSet.add(a(e,t));for(let e=355;e<435;e+=10)this.shelterSet.add(a(e,t))}this.updateGameStage(C.READY),this.paused=!1,this._score=0}handleInput(){const t=t=>{if(this.stage===C.RUNNING)switch(t){case"p":const e=new Audio(z.a);e.play(),this.paused=!this.paused,this.events.emit("paused",{paused:this.paused});break;case"ArrowLeft":this.gun.control=o.MOVE_LEFT;break;case"ArrowRight":this.gun.control=o.MOVE_RIGHT;break;case" ":this.gun.control=o.FIRE;break;default:this.gun.control=o.NONE}};document.addEventListener("keydown",e=>{this.gun.controlModifier=1,t(e.key)});const e=new n(document,{});e.on("swiperight",()=>{this.gun.controlModifier=2,t("ArrowRight")}),e.on("swipeleft",()=>{this.gun.controlModifier=2,t("ArrowLeft")}),e.on("tap",()=>{t(" ")})}start(){this.updateGameStage(C.RUNNING),this.run()}run(){this.paused||(this.runFrame(),this.events.emit("frame-done",{score:this._score,lives:this.gun.strength})),requestAnimationFrame(()=>{if(this.paint(),this._stage===C.RUNNING)this.run();else if(this._stage===C.FINISHED){const t=new Audio(j.a);t.volume=.75,setTimeout(()=>{t.play()},1e3)}})}paint(){const t=this.bufferCtx;if(t.clearRect(0,0,this.buffer.width,this.buffer.height),this.stage===C.RUNNING){const e=new Set([...this.shelterSet,...this.bombSet,...this.missileSet,...this.invaderSet,...this.explosionSet,this.gun]);for(let i of e)i.draw(t)}this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(this.buffer,0,0)}runFrame(){this.invaderIncrement++,this.invaderIncrement===this.invaderInterval&&(this.invaderSet.add(_()),this.invaderIncrement=0);for(let t of this.invaderSet){const e=t.fire();e&&this.bombSet.add(e),d(t,this.invaderSet)}for(let t of this.bombSet){u(t,this.gun)&&(this.gun.hit(),t.hit(),this._score+=this.gun.scoreModifier,this.explosionSet.add(L(t.x,t.y,T.LARGE)));for(let e of this.shelterSet)if(u(t,e)){t.hit(),e.hit(),this._score+=e.scoreModifier,d(e,this.shelterSet),this.explosionSet.add(L(t.x,t.y,T.SMALL));break}d(t,this.bombSet)}if(this.gun.isAlive()){if(this.gun.move(),this.gun.isFiring()&&this.missileSet.size<10){const t=this.gun.fire();t&&(this.missileSet.add(t),this.events.emit("ammo-changed",{ammo:this.gun.ammo}))}this.gun.control=o.NONE}else this.updateGameStage(C.FINISHED);for(let t of this.missileSet){for(let e of this.invaderSet)if(u(t,e)){t.hit(),e.hit(),this._score+=e.scoreModifier,this.explosionSet.add(L(e.x,e.y,T.LARGE));break}for(let e of this.shelterSet)if(u(t,e)){t.hit(),e.hit(),d(e,this.shelterSet);break}d(t,this.missileSet)}for(let t of this.explosionSet)d(t,this.explosionSet)}updateGameStage(t){this._stage=t,this.events.emit("stage-changed",{stage:t})}}(t)}(q);Q.events.on("paused",t=>{K.paused(t.paused)}),Q.events.on("frame-done",t=>{K.updateScore(t.score),K.updateLives(t.lives)}),Q.events.on("stage-changed",t=>{if(t.stage===C.READY)K.ready();else if(t.stage===C.RUNNING)K.running();else if(t.stage===C.FINISHED){let t=parseInt(localStorage.getItem("high-score"));(isNaN(t)||!isNaN(t)&&Q.score>t)&&(t=Q.score,localStorage.setItem("high-score",t+"")),K.finished(t,Q.score)}}),Q.events.on("ammo-changed",t=>{K.updateAmmo(t.ammo)}),Q.init();const Z=()=>{Q.stage!==C.RUNNING&&(Q.init(),Q.start())};document.addEventListener("keydown",Z),document.addEventListener("touchend",Z),console.log("https://github.com/philmander/save-the-moon")}]);